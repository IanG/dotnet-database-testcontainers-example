CREATE DATABASE movies;

CREATE USER moviesuser WITH PASSWORD 'moviesuser';

GRANT ALL PRIVILEGES ON DATABASE movies TO moviesuser;
ALTER DATABASE movies OWNER TO moviesuser;


\connect movies

GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO moviesuser;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO moviesuser;
GRANT ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA public TO moviesuser;

ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT ALL PRIVILEGES ON TABLES TO moviesuser;

CREATE TABLE movies (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  name VARCHAR(100) NOT NULL,
  year_of_release INTEGER NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);

INSERT INTO movies (name, year_of_release, created_at) VALUES
    ('Gone With The Wind', 1939, '2024-10-10 10:10:10'),
    ('Back To The Future', 1985, '2024-10-10 10:10:10');